<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª Ù„ÙƒÙ„ Ù‚Ø³Ù…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link id="bootstrapCSS" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body { font-family: 'Segoe UI', 'Cairo', sans-serif; background-color: #f4f6f9; margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
    header { background-color: #fff; padding: 10px 20px; box-shadow: 0 1px 5px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; height: 60px; z-index: 1100; }
    .app-title { display: flex; align-items: center; gap: 12px; font-size: 1.7rem; font-weight: 700; color: #2c3e50; user-select: none; }
    .app-title i { font-size: 2rem; color: #0d6efd; }
    #dateTime { color: #6c757d; font-size: 1rem; font-weight: 600; user-select: none; min-width: 220px; text-align: left; }
    #langToggle { background: linear-gradient(135deg,#4dabf7,#0d6efd); border: none; color: white; font-weight: 600; font-size: 1rem; cursor: pointer; display: flex; align-items: center; gap: 8px; padding: 6px 14px; border-radius: 8px; box-shadow: 0 4px 8px rgba(13,110,253,0.3); transition: background 0.3s ease; user-select: none; }
    #langToggle:hover { background: linear-gradient(135deg,#0d6efd,#4dabf7); box-shadow: 0 6px 12px rgba(13,110,253,0.5); }
    #hamburgerBtn { display: none; background: none; border: none; font-size: 1.8rem; cursor: pointer; color: #0d6efd; user-select: none; }
    .sidebar { position: fixed; top: 60px; right: 0; width: 240px; bottom: 0; background: #ffffff; border-left: 1px solid #dee2e6; padding: 20px 10px; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; z-index: 1000; }
    .sidebar a { display: flex; align-items: center; gap: 10px; padding: 12px 16px; font-weight: 600; font-size: 1rem; color: #2c3e50; border-radius: 12px; text-decoration: none; background: linear-gradient(145deg,#f0f4ff,#d9e3ff); box-shadow: 6px 6px 8px #b6c1f2, -6px -6px 8px #ffffff; transition: all 0.25s ease; user-select: none; }
    .sidebar a i { font-size: 1.3rem; color: #0d6efd; flex-shrink: 0; }
    .sidebar a:hover { background: linear-gradient(135deg,#a6c1ff,#4a7fff); color: #fff; box-shadow: 4px 4px 12px #3366ff, -4px -4px 12px #80aaff; }
    .sidebar a.active { background: linear-gradient(135deg,#0d6efd,#74a9ff); color: #fff !important; box-shadow: 4px 4px 16px #003bb3, -4px -4px 16px #66a3ff; pointer-events: none; }
    main#mainContent { margin-right: 240px; padding: 30px 25px; overflow-y: auto; background-color: #f4f6f9; flex-grow: 1; height: calc(100vh - 60px); }
    @media (max-width: 992px) {
      main#mainContent { margin-right: 0; padding: 20px 8px; }
      .sidebar { width: 220px; transform: translateX(100%); box-shadow: -4px 0 8px rgba(0,0,0,0.15); position: fixed; }
      .sidebar.open { transform: translateX(0); }
      #hamburgerBtn { display: block; }
      #dateTime { min-width: auto; font-size: 0.9rem; }
    }
    .actions-section { background: #fff; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.07); padding: 32px 18px; max-width: 900px; margin: 35px auto 0 auto; }
    .actions-section h2 { font-size: 1.25rem; font-weight: 700; color: #0d6efd; margin-bottom: 18px; text-align: center; }
    .settings-table { width: 100%; border-collapse: collapse; background: #fff; margin-bottom: 18px; }
    .settings-table th, .settings-table td { padding: 8px 6px; border: 1px solid #e3e6ef; text-align: center; font-size: 1rem; }
    .settings-table th { background: #f0f6ff; color: #0d6efd; font-weight: 700; }
    .settings-table td input[type="checkbox"] { transform: scale(1.3); }
    .settings-table select { border-radius: 7px; padding: 3px 8px; }
    .btn { font-weight: 600; }
    .success-msg { color: #198754; text-align: center; font-weight: 700; margin-top: 16px; }
    .error-msg { color: #dc3545; text-align: center; font-weight: 700; margin-top: 16px; }
  </style>
</head>
<body>
  <header>
    <button id="hamburgerBtn" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„"><i class="bi bi-list"></i></button>
    <div id="dateTime">ğŸ—“ï¸ --:--</div>
    <div class="app-title"><i class="bi bi-cart-fill"></i> <span data-i18n="title">ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span></div>
    <button id="langToggle" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©"><i class="bi bi-globe"></i> <span data-i18n="switchLang">English</span></button>
  </header>


  <nav class="sidebar" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©">
    <a href="index.html"><i class="bi bi-house-door-fill"></i><span class="emoji">ğŸ </span> <span data-key="navHome">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
    <a href="show_products.html"><i class="bi bi-box-seam"></i><span class="emoji">ğŸ“¦</span> <span data-key="navShowProducts">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span></a>
    <a href="add_timer.html" class="active" aria-current="page"><i class="bi bi-clock-history"></i><span class="emoji">â±ï¸</span> <span data-key="navAddTimer">Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ù‚Øª</span></a>
    <a href="timer_table.html"><i class="bi bi-table"></i><span class="emoji">ğŸ“‹</span> <span data-key="navTimerTable">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª</span></a>
    <a href="actions_timers.html"><i class="bi bi-tools"></i><span class="emoji">âš™ï¸</span> <span data-key="navActions">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬</span></a>
    <a href="print_options.html"><i class="bi bi-printer-fill"></i><span class="emoji">ğŸ–¨ï¸</span> <span data-key="navPrintOptions">Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</span></a>
    <a href="sound_settings.html"><i class="bi bi-volume-up-fill"></i><span class="emoji">ğŸ”Š</span> <span data-key="navSoundSettings">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª</span></a>
    <a href="alerts.html"><i class="bi bi-bell-fill"></i><span class="emoji">ğŸ””</span> <span data-key="navAlerts">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span></a>
    <a href="reports.html"><i class="bi bi-bar-chart-line-fill"></i><span class="emoji">ğŸ“ˆ</span> <span data-key="navReports">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span></a>
  </nav>
  <main id="mainContent">
    <section class="actions-section">
      <h2 data-i18n="actionsTitle">ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª Ù„ÙƒÙ„ Ù‚Ø³Ù…</h2>
      <form id="actionsForm">
        <div style="overflow-x:auto;">
        <table class="settings-table" id="sectionsSettingsTable">
          <thead>
            <tr>
              <th data-i18n="sectionNameAr">Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</th>
              <th data-i18n="sectionNameEn">Section Name En.</th>
              <th data-i18n="manualExpiry">Ø§Ø¯Ø®Ø§Ù„ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠØ§ØŸ</th>
              <th data-i18n="manualQty">Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© ÙŠØ¯ÙˆÙŠØ§ØŸ</th>
              <th data-i18n="manualPrep">Ø§Ø¯Ø®Ø§Ù„ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± ÙŠØ¯ÙˆÙŠØ§ØŸ</th>
              <th data-i18n="timeUnit">ÙˆØ­Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª</th>
              <th data-i18n="soundEnabled">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØªØŸ</th>
            </tr>
          </thead>
          <tbody id="sectionsSettingsBody"></tbody>
        </table>
        </div>
        <button type="submit" class="btn btn-success" data-i18n="save">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
        <button type="button" class="btn btn-primary" id="exportSettingsBtn" data-i18n="export">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ù„Ù‰ Google Sheet</button>
      </form>
      <div class="success-msg" id="successMsg" style="display:none"></div>
      <div class="error-msg" id="errorMsg" style="display:none"></div>
    </section>
  </main>

  <script>
    // --- Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ---
    const translations = {
      ar: {
        title: "ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        switchLang: "English",
        "nav.sync": "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
        "nav.showProducts": "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        "nav.addTimer": "Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ù‚Øª",
        "nav.timerTable": "Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª",
        "nav.productActions": "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬",
        "nav.printOptions": "Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©",
        "nav.soundSettings": "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª",
        "nav.alerts": "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡",
        "nav.reports": "Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",
        actionsTitle: "ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ§Øª Ù„ÙƒÙ„ Ù‚Ø³Ù…",
        sectionNameAr: "Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        sectionNameEn: "Section Name En.",
        manualExpiry: "Ø§Ø¯Ø®Ø§Ù„ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠØ§ØŸ",
        manualQty: "Ø§Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© ÙŠØ¯ÙˆÙŠØ§ØŸ",
        manualPrep: "Ø§Ø¯Ø®Ø§Ù„ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± ÙŠØ¯ÙˆÙŠØ§ØŸ",
        timeUnit: "ÙˆØ­Ø¯Ø© Ø§Ù„ÙˆÙ‚Øª",
        soundEnabled: "ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØªØŸ",
        save: "ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        export: "ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ù„Ù‰ Google Sheet",
        success: "âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!",
        exportSuccess: "âœ… ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!",
        error: "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸.",
        days: "Ø£ÙŠØ§Ù…",
        hours: "Ø³Ø§Ø¹Ø§Øª",
        minutes: "Ø¯Ù‚Ø§Ø¦Ù‚"
      },
      en: {
        title: "ğŸ›’ Product Management",
        switchLang: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "nav.sync": "Sync Data",
        "nav.showProducts": "Show Products",
        "nav.addTimer": "Add Timer",
        "nav.timerTable": "Timer Table",
        "nav.productActions": "Product Actions",
        "nav.printOptions": "Print Options",
        "nav.soundSettings": "Sound Settings",
        "nav.alerts": "Alerts Settings",
        "nav.reports": "Reports",
        actionsTitle: "ğŸ› ï¸ Timer Settings Per Section",
        sectionNameAr: "Section Name (AR)",
        sectionNameEn: "Section Name (EN)",
        manualExpiry: "Manual Expiry Input?",
        manualQty: "Manual Quantity Input?",
        manualPrep: "Manual Preparation Input?",
        timeUnit: "Time Unit",
        soundEnabled: "Sound Enabled?",
        save: "ğŸ’¾ Save Settings",
        export: "ğŸ“¤ Export Settings to Google Sheet",
        success: "âœ… Settings saved successfully!",
        exportSuccess: "âœ… Settings exported successfully!",
        error: "âŒ Error saving settings.",
        days: "days",
        hours: "hours",
        minutes: "minutes"
      }
    };

    function applyTranslations() {
      const lang = localStorage.getItem("appLang") || "ar";
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (translations[lang] && translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
      // Ø²Ø± Ø§Ù„Ù„ØºØ©
      const toggleBtnText = document.querySelector("#langToggle span");
      toggleBtnText.textContent = translations[lang]["switchLang"];
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
    }

    function updateDateTime() {
      const now = new Date();
      const options = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
      const timeOptions = { hour: "2-digit", minute: "2-digit", hour12: false };
      const lang = localStorage.getItem("appLang") || "ar";
      const locale = lang === "ar" ? "ar-EG" : "en-US";
      const dateStr = now.toLocaleDateString(locale, options);
      const timeStr = now.toLocaleTimeString(locale, timeOptions);
      document.getElementById("dateTime").textContent = `ğŸ—“ï¸ ${dateStr} - â° ${timeStr}`;
    }

    function toggleLanguage() {
      const curr = localStorage.getItem("appLang") || "ar";
      const next = curr === "ar" ? "en" : "ar";
      localStorage.setItem("appLang", next);
      location.reload();
    }

    document.addEventListener("DOMContentLoaded", () => {
      applyTranslations();
      updateDateTime();
      setInterval(updateDateTime, 60000);

      document.getElementById("langToggle").addEventListener("click", toggleLanguage);

      // Ù„Ù„Ù‡ÙˆØ§ØªÙ: Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±Ø¬Ø±
      const hamburgerBtn = document.getElementById("hamburgerBtn");
      const sidebar = document.querySelector(".sidebar");
      hamburgerBtn.addEventListener("click", () => {
        sidebar.classList.toggle("open");
      });

      renderSectionsSettingsTable();
      document.getElementById("actionsForm").addEventListener("submit", saveSettings);
      document.getElementById("exportSettingsBtn").addEventListener("click", exportSettingsToGoogleSheet);
    });

    // --- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ---
    const defaultSectionsSettings = [
      { id: 1, en: "Frozens", ar: "Ù…Ø¬Ù…Ø¯Ø§Øª", manualExpiry: true, manualQty: false, manualPrep: false, timeUnit: "days", soundEnabled: true },
      { id: 2, en: "Bakery", ar: "Ù…Ø®Ø¨Ø²", manualExpiry: true, manualQty: false, manualPrep: false, timeUnit: "days", soundEnabled: true },
      { id: 3, en: "Preptation Tables", ar: "Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ØªØ­Ø¶ÙŠØ±", manualExpiry: false, manualQty: true, manualPrep: false, timeUnit: "hours", soundEnabled: true },
      { id: 4, en: "Salads", ar: "Ø§Ù„Ø³Ù„Ø·Ø§Øª", manualExpiry: false, manualQty: true, manualPrep: false, timeUnit: "hours", soundEnabled: true },
      { id: 5, en: "Thawing prouducts", ar: "Ù…Ù†ØªØ¬Ø§Øª Ø¥Ø°Ø§Ø¨Ø© Ø§Ù„Ø¬Ù„ÙŠØ¯", manualExpiry: false, manualQty: true, manualPrep: false, timeUnit: "hours", soundEnabled: true },
      { id: 6, en: "Secondary Expirations", ar: "Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ", manualExpiry: false, manualQty: true, manualPrep: false, timeUnit: "hours", soundEnabled: true },
      { id: 7, en: "Chilleed items", ar: "Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¨Ø±Ø¯Ø©", manualExpiry: true, manualQty: false, manualPrep: false, timeUnit: "days", soundEnabled: true },
      { id: 8, en: "Hand Sanitizer Timer", ar: "Ù…Ø¤Ù‚Øª Ù…Ø¹Ù‚Ù… Ø§Ù„ÙŠØ¯ÙŠÙ†", manualExpiry: false, manualQty: false, manualPrep: false, timeUnit: "minutes", soundEnabled: true },
      { id: 9, en: "Cleaning Items", ar: "Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ", manualExpiry: true, manualQty: false, manualPrep: false, timeUnit: "days", soundEnabled: true }
    ];

    function getSectionsSettings() {
      let settings = [];
      try { settings = JSON.parse(localStorage.getItem('sectionsSettings') || '[]'); } catch { settings = []; }
      if (!settings.length) settings = defaultSectionsSettings;
      return settings;
    }

    function renderSectionsSettingsTable() {
      const lang = localStorage.getItem("appLang") || "ar";
      const settings = getSectionsSettings();
      const tbody = document.getElementById("sectionsSettingsBody");
      tbody.innerHTML = "";
      settings.forEach((sec, idx) => {
        tbody.innerHTML += `
          <tr>
            <td><input type="text" class="form-control" value="${sec.ar}" data-row="${idx}" data-key="ar" /></td>
            <td><input type="text" class="form-control" value="${sec.en}" data-row="${idx}" data-key="en" /></td>
            <td><input type="checkbox" ${sec.manualExpiry ? "checked" : ""} data-row="${idx}" data-key="manualExpiry" /></td>
            <td><input type="checkbox" ${sec.manualQty ? "checked" : ""} data-row="${idx}" data-key="manualQty" /></td>
            <td><input type="checkbox" ${sec.manualPrep ? "checked" : ""} data-row="${idx}" data-key="manualPrep" /></td>
            <td>
              <select data-row="${idx}" data-key="timeUnit" class="form-select">
                <option value="days" ${sec.timeUnit === "days" ? "selected" : ""}>${translations[lang]["days"]}</option>
                <option value="hours" ${sec.timeUnit === "hours" ? "selected" : ""}>${translations[lang]["hours"]}</option>
                <option value="minutes" ${sec.timeUnit === "minutes" ? "selected" : ""}>${translations[lang]["minutes"]}</option>
              </select>
            </td>
            <td><input type="checkbox" ${sec.soundEnabled ? "checked" : ""} data-row="${idx}" data-key="soundEnabled" /></td>
          </tr>
        `;
      });

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
      tbody.querySelectorAll('input,select').forEach(el => {
        el.addEventListener('change', updateSectionSetting);
      });
    }

    function updateSectionSetting(e) {
      let settings = getSectionsSettings();
      const row = parseInt(e.target.getAttribute('data-row'));
      const key = e.target.getAttribute('data-key');
      if (e.target.type === "checkbox") {
        settings[row][key] = e.target.checked;
      } else if (e.target.type === "text") {
        settings[row][key] = e.target.value;
      } else if (e.target.tagName === "SELECT") {
        settings[row][key] = e.target.value;
      }
      localStorage.setItem('sectionsSettings', JSON.stringify(settings));
    }

    function saveSettings(e) {
      e.preventDefault();
      // ØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
      showSuccess("success");
    }

    function showSuccess(key) {
      const lang = localStorage.getItem("appLang") || "ar";
      document.getElementById("successMsg").textContent = translations[lang][key];
      document.getElementById("successMsg").style.display = "block";
      document.getElementById("errorMsg").style.display = "none";
      setTimeout(() => { document.getElementById("successMsg").style.display = "none"; }, 3000);
    }
    function showError(key) {
      const lang = localStorage.getItem("appLang") || "ar";
      document.getElementById("errorMsg").textContent = translations[lang][key];
      document.getElementById("errorMsg").style.display = "block";
      document.getElementById("successMsg").style.display = "none";
      setTimeout(() => { document.getElementById("errorMsg").style.display = "none"; }, 3000);
    }

    // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ù„Ù‰ Google Sheet (Ù…Ø«Ø§Ù„: Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Apps Script)
    function exportSettingsToGoogleSheet() {
      const settings = getSectionsSettings();
      // Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ÙØ¹Ù„ÙŠ Ù„Ù„ÙˆÙŠØ¨ Ø¢Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
      const url = "https://script.google.com/macros/s/AKfycbyVSSPlJFT1ru3OWoOlqDzRr6lhBeiphl8GsMmN96kSPO_v5vtW28vQ-0O1LGLHDJTG/exec";
      fetch(url, {
        method: "POST",
        body: JSON.stringify({ settings }),
        headers: { "Content-Type": "application/json" }
      })
      .then(res => res.json())
      .then(data => {
        showSuccess("exportSuccess");
      })
      .catch(err => {
        showError("error");
      });
    }
  </script>
  <script>
    window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>
